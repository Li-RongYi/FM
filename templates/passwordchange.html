{% extends 'base.html' %}
{% block content %}
               <form role="form" method="post" action="{% url 'passwordchange' %}">
                   {% if message %}
                  <div class="alert alert-warning">{{ message }}</div>
              {% endif %}

              {% csrf_token %}
               <input type="hidden" name="btn-state" id="btn-state" value="submit">

                   <div class="form-group">
			       <label >Code</label>
			       <input type="text" name="code" placeholder="验证码..." maxlength="6" class="form-password form-control" id="code">
                   <button type="submit" class="btn-group" id="btn-email">获取验证码</button>
                   </div>
                   <!--<div class="form-group">
                   <label >老密码</label>
                   <input type="password" name="oldpassword" placeholder="老密码" id="oldpassword" class="form-username form-control">
                   </div>-->
                   <div class="form-group">
                   <label >新密码</label>
                   <input type="password" name="newpassword1" placeholder="新密码" id="newpassword1" class="form-username form-control">
                   </div>
                   <div class="form-group">
                   <label >再次输入</label>
                   <input type="password" name="newpassword2" placeholder="确认密码" id="newpassword2" class="form-username form-control">
                   </div>


              <button type="submit" class="btn" id="btn-submit">确认</button>

          </form>
    <script>
            document.getElementById("btn-email").onclick = function() {
            document.getElementById("btn-state").value = 'email'
        };
        </script>
    <script>
            document.getElementById("btn-submit").onclick = function() {
                if (document.getElementById("code").value == ""
                 || document.getElementById("newpassword1").value == "" || document.getElementById("newpassword2").value == ""){
                    alert("complete before submitting");
                    return false;
                }
                 if ( document.getElementById("newpassword1").value.length < 5) {
                  alert("the length of password is at least 5");
                  return false;
              }
              if (document.getElementById("newpassword1").value != document.getElementById("newpassword2").value){
                    alert("two new codes are not the same!!");
                    return false;
                }
        };
        </script>
{% endblock %}